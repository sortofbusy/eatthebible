<section data-ng-controller="GroupsController" data-ng-init="findOne()">
	<div class="page-header">
		<a href="/#!/groups"><i class="fa fa-angle-double-left"></i> Back To Groups</a>
		<br>
		<span class="h1" data-ng-bind="group.name"></span>
		<span class="label label-primary" data-ng-show="group.creator === authentication.user._id">CREATOR</span>
		<!--<span class="label label-success" data-ng-show="(group.users.indexOf(authentication.user._id) > -1)">MEMBER</span>--> 
        
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-4">
			<ul class="list-group">
				<li class="h3 list-group-item list-group-item-warning"><i class="fa fa-comment fa-fw"></i> Notes</li>
				<li class="list-group-item" data-ng-repeat="message in group.recentMessages">
					<a data-ng-click="showVerse[$index]=!showVerse[$index]"><strong>{{message.verse.inputstring + ':' + message.verse.ref}} <span class="caret"></span></strong></a>
					<span class="pull-right" data-ng-show="message.user.id === authentication.user.id">
		            	<a data-ng-href="#!/messages/{{message._id}}"><i class="fa fa-edit fa-fw"></i></a> 
		            </span>
					<div data-ng-show="showVerse[$index]" class="border"><em>{{message.verse.text}}</em></div>
					<div data-ng-show="message.text">
						"{{message.text}}"
					</div>
					<div class="text-right">
						<small>{{message.user.displayName}}, <em>{{message.created | date : "MMM. d"}}</em></small>
					</div>
				</li>
			</ul>
		</div>
		<div class="col-xs-12 col-md-4">
			<ul class="list-group">
				<li class="h3 list-group-item list-group-item-info"><i class="fa fa-bookmark fa-fw"></i> Recent Chapters</li>
				<li class="list-group-item" data-ng-repeat="chapter in group.recentChapters">{{chapter.name}} <small class="pull-right">{{chapter.user.displayName}}, <em>{{chapter.created | date : "MMM. d"}}</em></small></li>
			</ul>
		</div>
		<div class="col-xs-12 col-md-4">
			<ul class="list-group">
				<li class="h3 list-group-item list-group-item-success"><i class="fa fa-group fa-fw"></i> Members</li>
				<li class="list-group-item" data-ng-repeat="user in group.users">{{user.displayName}}</li>
			</ul>
		</div>
	</div>
	<div >
		<a class="pull-right" ng-click="optionsCollapsed = !optionsCollapsed"><i class="fa fa-2x fa-fw fa-chevron-down"></i></a>
		<div collapse="optionsCollapsed">
			<div class="well well-lg">
				<div data-ng-show="!group.open">
					<h3>Access Token:</h3> <em>{{group.accessToken}}</em><br><br>
				</div>
				<div class="" data-ng-show="((authentication.user) && (authentication.user._id == group.creator))">
					<a class="btn btn-primary" href="/#!/groups/{{group._id}}/edit">
						<i class="glyphicon glyphicon-edit"></i> Edit
					</a>
					<a class="btn btn-danger" data-ng-click="remove();">
						<i class="glyphicon glyphicon-trash"></i> Delete
					</a>
				</div>
				<div data-ng-show="((authentication.user) && (authentication.user._id !== group.creator))">
					<a class="btn btn-danger" data-ng-click="remove();">
						<i class="glyphicon glyphicon-trash"></i> Leave Group
					</a>
				</div>
			</div>
		</div>
	</div>
</section>
